{"version":3,"file":"agent.js","sourceRoot":"","sources":["agent.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAaH;;GAEG;AACH,MAAM,CAAN,IAAY,gBAOX;AAPD,WAAY,gBAAgB;IAC1B,yCAAqB,CAAA;IACrB,kDAA8B,CAAA;IAC9B,gDAA4B,CAAA;IAC5B,+DAA2C,CAAA;IAC3C,mEAA+C,CAAA;IAC/C,4CAAwB,CAAA;AAC1B,CAAC,EAPW,gBAAgB,KAAhB,gBAAgB,QAO3B;AAED;;GAEG;AACH,MAAM,CAAN,IAAY,iBAcX;AAdD,WAAY,iBAAiB;IAC3B,wCAAmB,CAAA;IACnB,yDAAoC,CAAA;IACpC,qDAAgC,CAAA;IAChC,mDAA8B,CAAA;IAC9B,2DAAsC,CAAA;IACtC,kEAA6C,CAAA;IAC7C,qDAAgC,CAAA;IAChC,kEAA6C,CAAA;IAC7C,oEAA+C,CAAA;IAC/C,oEAA+C,CAAA;IAC/C,wDAAmC,CAAA;IACnC,oCAAe,CAAA;IACf,wCAAmB,CAAA;AACrB,CAAC,EAdW,iBAAiB,KAAjB,iBAAiB,QAc5B","sourcesContent":["/**\n * Types related to the Deepgram Voice Agent API\n * Based on the VA-API Spec README.md\n */\n\n/**\n * Agent states in the voice interaction process\n */\nexport type AgentState =\n  | 'idle'\n  | 'listening'\n  | 'thinking'\n  | 'speaking'\n  | 'entering_sleep'\n  | 'sleeping';\n\n/**\n * Agent message types for outgoing messages to the API\n */\nexport enum AgentMessageType {\n  SETTINGS = 'Settings',\n  UPDATE_PROMPT = 'UpdatePrompt',\n  UPDATE_SPEAK = 'UpdateSpeak',\n  INJECT_AGENT_MESSAGE = 'InjectAgentMessage',\n  FUNCTION_CALL_RESPONSE = 'FunctionCallResponse',\n  KEEP_ALIVE = 'KeepAlive',\n}\n\n/**\n * Agent message types for incoming messages from the API\n */\nexport enum AgentResponseType {\n  WELCOME = 'Welcome',\n  SETTINGS_APPLIED = 'SettingsApplied',\n  PROMPT_UPDATED = 'PromptUpdated',\n  SPEAK_UPDATED = 'SpeakUpdated',\n  CONVERSATION_TEXT = 'ConversationText',\n  USER_STARTED_SPEAKING = 'UserStartedSpeaking',\n  AGENT_THINKING = 'AgentThinking',\n  FUNCTION_CALL_REQUEST = 'FunctionCallRequest',\n  FUNCTION_CALL_RESPONSE = 'FunctionCallResponse',\n  AGENT_STARTED_SPEAKING = 'AgentStartedSpeaking',\n  AGENT_AUDIO_DONE = 'AgentAudioDone',\n  ERROR = 'Error',\n  WARNING = 'Warning',\n}\n\n/**\n * Role in a conversation\n */\nexport type ConversationRole = 'user' | 'assistant';\n\n/**\n * Settings message as per the spec\n */\nexport interface AgentSettingsMessage {\n  type: AgentMessageType.SETTINGS;\n  experimental?: boolean;\n  audio: {\n    input: {\n      encoding: string;\n      sample_rate: number;\n    };\n    output?: {\n      encoding: string;\n      sample_rate: number;\n      bitrate?: number;\n      container?: string;\n    };\n  };\n  agent: {\n    language?: string;\n    listen?: {\n      provider: {\n        type: string;\n        model: string;\n        keyterms?: string[];\n      };\n    };\n    think: {\n      provider: {\n        type: string;\n        model: string;\n        temperature?: number;\n      };\n      endpoint?: {\n        url: string;\n        headers?: Record<string, string>;\n      };\n      functions?: AgentFunction[];\n      prompt?: string;\n    };\n    speak?: {\n      provider: {\n        type: string;\n        model?: string;\n        model_id?: string;\n        voice?: string;\n        language_code?: string;\n        mode?: string;\n        id?: string;\n      };\n      endpoint?: {\n        url: string;\n        headers?: Record<string, string>;\n      };\n    };\n    greeting?: string;\n  };\n}\n\n/**\n * UpdatePrompt message as per the spec\n */\nexport interface UpdatePromptMessage {\n  type: AgentMessageType.UPDATE_PROMPT;\n  prompt: string;\n}\n\n/**\n * UpdateSpeak message as per the spec\n */\nexport interface UpdateSpeakMessage {\n  type: AgentMessageType.UPDATE_SPEAK;\n  speak: {\n    provider: {\n      type: string;\n      model?: string;\n      model_id?: string;\n      voice?: string;\n      language_code?: string;\n      mode?: string;\n      id?: string;\n    };\n    endpoint?: {\n      url: string;\n      headers?: Record<string, string>;\n    };\n  };\n}\n\n/**\n * InjectAgentMessage for immediate agent response\n */\nexport interface InjectAgentMessage {\n  type: AgentMessageType.INJECT_AGENT_MESSAGE;\n  content: string;\n}\n\n/**\n * FunctionCallResponse to send back function results\n */\nexport interface FunctionCallResponseMessage {\n  type: AgentMessageType.FUNCTION_CALL_RESPONSE;\n  id: string;\n  name: string;\n  content: string;\n}\n\n/**\n * KeepAlive message to maintain the connection\n */\nexport interface KeepAliveMessage {\n  type: AgentMessageType.KEEP_ALIVE;\n}\n\n/**\n * Function definition for agent\n */\nexport interface AgentFunction {\n  name: string;\n  description: string;\n  parameters: Record<string, any>;\n  endpoint?: {\n    url: string;\n    method: string;\n    headers?: Record<string, string>;\n  };\n}\n\n/**\n * Welcome response from the server\n */\nexport interface WelcomeResponse {\n  type: AgentResponseType.WELCOME;\n  request_id: string;\n}\n\n/**\n * Settings applied confirmation\n */\nexport interface SettingsAppliedResponse {\n  type: AgentResponseType.SETTINGS_APPLIED;\n}\n\n/**\n * Prompt updated confirmation\n */\nexport interface PromptUpdatedResponse {\n  type: AgentResponseType.PROMPT_UPDATED;\n}\n\n/**\n * Speak updated confirmation\n */\nexport interface SpeakUpdatedResponse {\n  type: AgentResponseType.SPEAK_UPDATED;\n}\n\n/**\n * Conversation text from user or assistant\n */\nexport interface ConversationTextResponse {\n  type: AgentResponseType.CONVERSATION_TEXT;\n  role: ConversationRole;\n  content: string;\n}\n\n/**\n * User started speaking notification\n */\nexport interface UserStartedSpeakingResponse {\n  type: AgentResponseType.USER_STARTED_SPEAKING;\n}\n\n/**\n * Agent thinking notification\n */\nexport interface AgentThinkingResponse {\n  type: AgentResponseType.AGENT_THINKING;\n  content: string;\n}\n\n/**\n * Function call request from the agent\n */\nexport interface FunctionCallRequestResponse {\n  type: AgentResponseType.FUNCTION_CALL_REQUEST;\n  functions: Array<{\n    id: string;\n    name: string;\n    arguments: string;\n    client_side: boolean;\n  }>;\n}\n\n/**\n * Function call response from the server\n */\nexport interface FunctionCallResponseFromServer {\n  type: AgentResponseType.FUNCTION_CALL_RESPONSE;\n  id: string;\n  name: string;\n  content: string;\n}\n\n/**\n * Agent started speaking notification\n */\nexport interface AgentStartedSpeakingResponse {\n  type: AgentResponseType.AGENT_STARTED_SPEAKING;\n}\n\n/**\n * Agent audio done notification\n */\nexport interface AgentAudioDoneResponse {\n  type: AgentResponseType.AGENT_AUDIO_DONE;\n}\n\n/**\n * Error response from the server\n */\nexport interface ErrorResponse {\n  type: AgentResponseType.ERROR;\n  description: string;\n  code: string;\n}\n\n/**\n * Warning response from the server\n */\nexport interface WarningResponse {\n  type: AgentResponseType.WARNING;\n  description: string;\n  code: string;\n}\n\n/**\n * Union type for all outgoing messages\n */\nexport type AgentOutgoingMessage =\n  | AgentSettingsMessage\n  | UpdatePromptMessage\n  | UpdateSpeakMessage\n  | InjectAgentMessage\n  | FunctionCallResponseMessage\n  | KeepAliveMessage;\n\n/**\n * Union type for all incoming messages\n */\nexport type AgentIncomingMessage =\n  | WelcomeResponse\n  | SettingsAppliedResponse\n  | PromptUpdatedResponse\n  | SpeakUpdatedResponse\n  | ConversationTextResponse\n  | UserStartedSpeakingResponse\n  | AgentThinkingResponse\n  | FunctionCallRequestResponse\n  | FunctionCallResponseFromServer\n  | AgentStartedSpeakingResponse\n  | AgentAudioDoneResponse\n  | ErrorResponse\n  | WarningResponse;\n\n/**\n * Simplified agent options for component props\n */\nexport interface AgentOptions {\n  // Core parameters\n  language?: string; // e.g., \"en-US\"\n\n  // Listen settings\n  listenModel?: string; // e.g., \"nova-2\"\n\n  // Think settings\n  thinkProviderType?: string; // e.g., \"open_ai\", \"anthropic\", etc.\n  thinkModel?: string; // e.g., \"gpt-4-turbo\", \"claude-3-sonnet\"\n  thinkEndpointUrl?: string; // e.g., 'https://api.openai.com/v1/chat/completions'\n  thinkApiKey?: string; // e.g., think LLM provider API key\n  thinkTemperature?: number; // e.g., 0.7\n  instructions?: string; // Base instructions for the agent\n\n  // Speak settings\n  speakProvider?: string; // e.g., \"deepgram\", \"eleven_labs\"\n  voice?: string; // e.g., \"aura-asteria-en\"\n\n  // Optional greeting message\n  greeting?: string;\n\n  // Function definitions for agent\n  functions?: AgentFunction[];\n}\n\n/**\n * Payload for updating agent instructions during an active session\n */\nexport interface UpdateInstructionsPayload {\n  context?: string;\n  instructions?: string;\n  [key: string]: any;\n}\n"]}