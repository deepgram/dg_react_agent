{"version":3,"file":"VoiceWebSocketManager.js","sourceRoot":"","sources":["VoiceWebSocketManager.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,gBAAgB,EAAE,MAAM,oBAAoB,CAAC;AAQtD;IAA2C,yCAAgB;IACzD,+BACE,OAA8B,EAC9B,QAAqC;QAArC,yBAAA,EAAA,aAAqC;eAErC,kBAAM,OAAO,EAAE,QAAQ,CAAC;IAC1B,CAAC;IAES,iDAAiB,GAA3B;QACE,IAAM,OAAO,GAAG,IAAI,CAAC,OAAgC,CAAC;QACtD,IAAM,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC;QAE5B,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE;YACxB,OAAO,OAAO,CAAC;SAChB;QAED,IAAM,MAAM,GAAG,IAAI,eAAe,EAAE,CAAC;QACrC,KAA2B,UAAmC,EAAnC,KAAA,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,EAAnC,cAAmC,EAAnC,IAAmC,EAAE;YAArD,IAAA,WAAY,EAAX,GAAG,QAAA,EAAE,KAAK,QAAA;YACpB,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;SACnC;QAED,OAAO,UAAG,OAAO,cAAI,MAAM,CAAC,QAAQ,EAAE,CAAE,CAAC;IAC3C,CAAC;IAEM,+CAAe,GAAtB;QACE,IAAI,IAAI,CAAC,WAAW,EAAE,EAAE;YACtB,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,EAAE,aAAa,EAAE,CAAC,CAAC;SAC3C;IACH,CAAC;IAEM,qCAAK,GAAZ;QACE,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAEM,wCAAQ,GAAf,UAAgB,OAAY;QAC1B,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;IAC5B,CAAC;IACH,4BAAC;AAAD,CAAC,AArCD,CAA2C,gBAAgB,GAqC1D","sourcesContent":["import { WebSocketManager } from './WebSocketManager';\nimport { WebSocketManagerOptions, WebSocketEventHandlers } from '../../types/common/connection';\n\ninterface VoiceWebSocketOptions extends WebSocketManagerOptions {\n  service: 'transcription' | 'agent';\n  queryParams?: Record<string, string | number | boolean>;\n}\n\nexport class VoiceWebSocketManager extends WebSocketManager {\n  constructor(\n    options: VoiceWebSocketOptions,\n    handlers: WebSocketEventHandlers = {}\n  ) {\n    super(options, handlers);\n  }\n\n  protected buildWebSocketURL(): string {\n    const options = this.options as VoiceWebSocketOptions;\n    const baseURL = options.url;\n\n    if (!options.queryParams) {\n      return baseURL;\n    }\n\n    const params = new URLSearchParams();\n    for (const [key, value] of Object.entries(options.queryParams)) {\n      params.append(key, String(value));\n    }\n\n    return `${baseURL}?${params.toString()}`;\n  }\n\n  public sendCloseStream(): void {\n    if (this.isConnected()) {\n      this.sendMessage({ type: 'CloseStream' });\n    }\n  }\n\n  public close(): void {\n    this.disconnect();\n  }\n\n  public sendJSON(message: any): void {\n    this.sendMessage(message);\n  }\n} "]}